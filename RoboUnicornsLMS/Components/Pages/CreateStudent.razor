@page "/CreateUser"
@rendermode InteractiveServer
@inject HttpClient HttpClient

<script>
/* When the user clicks on the button, 
toggle between hiding and showing the dropdown content */
function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown if the user clicks outside of it

</script>

<h3>Create User</h3>
<form>
    <label for="fname">First name:</label>
        <input type="text" id="fname" name="fname" @bind-value="Fname"><br><br>
    <label for="lname">Last name:</label>
    <input type="text" id="lname" name="lname" @bind-value="Lname"><br><br>
    <label for="email">Email:</label>
    <input type="text" id="email" name="email" @bind-value="Email"><br><br>

       
</form>
<form class="form-floating">
    <input type="email" class="form-control" id="floatingInputValue" placeholder="name@example.com" value="test@example.com">
    <label for="floatingInputValue">Input with value</label>
</form>
<div class="form-floating">
    <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea"></textarea>
    <label for="floatingTextarea">Comments</label>
</div>

<select @bind = "@SelectedCourseId">
    @foreach(var course in courses){
        <option value="@course.Id">@course.Title </option>
   
    }
    
</select>

<input type="submit" value="Submit" onclick=@CreateUser>

@code {

    List<Course> courses = new();
    String Fname;
    String Lname;
    String Email;
    int SelectedCourseId;

    protected override async Task OnInitializedAsync()
    {
        // await HttpClient.GetAsync("/api/courses");

        courses = await HttpClient.GetFromJsonAsync<List<Course>>("/api/courses") ?? new();


    }

    public async Task CreateUser()
    {
        var user = new User
            {

                FirstName = Fname,
                LastName = Lname,
                Email = Email,
                Password = "123",
                CourseID = SelectedCourseId
            };

        await HttpClient.PostAsJsonAsync<User>("/api/Users", user);
    }

}
